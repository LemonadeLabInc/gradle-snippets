plugins {
  id 'com.gradle.plugin-publish' version '0.9.9'
  id 'de.lemona.gradle'          version '0.1.2'
}

apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'maven-publish'

// Depend on Gradle API
dependencies {
  compile gradleApi()
  compile localGroovy()
}

// Disabling upload for SNAPSHOT builds
gradle.taskGraph.whenReady { taskGraph ->
  if (version.isSnapshot) {
    logger.lifecycle('Disabling publishing for snapshot')
    tasks.publishPlugins.enabled = false;
  }
}

// Plugin details
pluginBundle {
  website = 'https://www.leomo.io/'
  vcsUrl = 'https://github.com/LemonadeLabInc/gradle-snippets'
  description = 'Lemonade Android and Java conventions plugin'
  tags = [ 'lemonade' ]
  plugins {
    gradle {
      id = 'de.lemona.gradle'
      displayName = 'Lemonade Gradle plugin'
    }
  }
}
